---
menu: todo
---

![Authorization Process](/hsf/img/auth-process.svg)

## Authorization Process

### 1. Initiation

REflex users initiate a pub/sub relationship through the [REflex AppStore](https://reflex-ui.yodata.me/)

![](../img/appstore-switch-ui.png)

### 2. Authorization

REflex AppStore publishes {AuthorizeAction}

https://schema.org/AuthorizeAction

```http
POST /inbox/ HTTP/1.1
Host: application.example.com
Content-Type: application/ld+json

{
    "@context":   "https://context.yodata.io/yodata/realestate#",
    "type":       "AuthorizeAction",
    "agent": 	  "https://user.example.com/profile/card#me",
    "instrument": "https://appstore.example.com/profile/card#me",
	"object":     "https://user.example.com/inbox/",
	"recipient":  "https://application.example.com/profile/card#me"
}
```

### 3. Subscription

Application publishes SubscribeAction with actionStatus = PotentialActionStatus

https://schema.org/SubscribeAction

```http
POST /inbox/ HTTP/1.1
Host: user.example.com
Content-Type: application/ld+json

{
	"@context": "https://yodata.io/yodata/realestate#",
	"type": "SubscribeAction",
	"actionStatus": "PotentialActionStatus",
	"agent":  "https://application.example.com/profile/card#me",
    "object": "https://user.example.com/inbox/"
}
```

### 4. Confirmation

User verifies and acknowledges the subscription by publishing a SubscribeAction with actionStatus = CompletedActionStatus.

```http
POST /inbox/ HTTP/1.1
Host: application.example.com
Content-Type: application/ld+json

{
	"@context": "https://yodata.io/yodata/realestate#",
	"type": "SubscribeAction",
	"actionStatus": "ActiveActionStatus",
	"agent":  "https://application.example.com/profile/card#me",
    "object": "https://user.example.com/inbox/"
}
```



----

## Deauthorization

When a user revokes your application's their inbox, your application will receive a RejectAction

https://schema.org/RejectAction

```yaml
type: RejectAction
agent: 'https://user.example.com/profile/card#me'
object: 'https://user.example.com/inbox/'
recipient: 'https://application.example.com/profile/card#me'
```

---

Diagrams on this page generated by js-sequence and the following

```sequence
User->Application: 1. Intiation (WebUI)
User->Application: 2. Authorization {AuthorizeAction}
Application->User: 3. Subscription {SubscribeAction}
User->Application: 4. Confirmation {SubscribeAction}
```

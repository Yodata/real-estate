asyncapi: 1.2.0
info:
  title: Real Estate Events API
  version: '0.0.1'
  description:
    A specification for describing real estate data and events in common way
  contact:
    name: Dave Duran
    email: dave@yodata.io
    url: 'https://yodata.io/real-estate'

servers:
  - scheme: https
    description: demo
    url: 'https://real-estate.yodata.me/'

topics:
  profiles:
    subscribe:
      summary: Receive updates about agents, offices, and affiliates.
      payload:
        oneOf:
          - $ref: '#components/messages/AddAction'
          - $ref: '#components/messages/UpdateAction'

  listings:
    subscribe:
      summary: Receive updates about agents, offices, and affiliates.
      payload:
        oneOf:
          - $ref: '#components/messages/AddAction'
          - $ref: '#components/messages/UpdateAction'

  leads:
    subscribe:
      summary: Receive updates about agents, offices, and affiliates.
      payload:
        oneOf:
          - $ref: '#components/messages/AddAction'
          - $ref: '#components/messages/UpdateAction'

  contacts:
    subscribe:
      summary: Receive updates about agents, offices, and affiliates.
      payload:
        oneOf:
          - $ref: '#components/messages/AddAction'
          - $ref: '#components/messages/UpdateAction'

components:
  securitySchemes:
    apiKey:
      type: httpApiKey
      name: x-api-key
      in: header

  messages:
    AddAction:
      x-title: AddAction
      summary: An item is added to a collection.
      description: An item is added to a collection.
      payload:
        $ref: '#/components/schemas/AddAction'

    UpdateAction:
      x-title: UpdateAction
      summary: An item is added to a collection.
      description: An item is added to a collection.
      payload:
        $ref: '#/components/schemas/UpdateAction'

  schemas:
    PersonalProfileDocument:
      $ref: components/schemas/Profile.yaml

    Action:
      $ref: components/schemas/Action.yaml

    RealEstateAgent:
      $ref: components/schemas/RealEstateAgent.yaml

    RealEstateOrganization:
      $ref: components/schemas/Organization.yaml

    AddAction:
      $ref: components/schemas/AddAction.yaml

    UpdateAction:
      title: UpdateAction
      allOf:
        - $ref: components/schemas/Action.yaml
        - type: object
          properties:
            type:
              type: string
              enum:
                - UpdateAction

    Person:
      $ref: components/schemas/Person.yaml

    Order:
      $ref: components/schemas/Thing.yaml

    PropertyValue:
      $ref: components/schemas/PropertyValue.yaml

    PostalAddress:
      $ref: components/schemas/PostalAddress.yaml

    OrganizationRole:
      $ref: components/schemas/OrganizationRole.yaml

    Thing:
      $ref: components/schemas/Thing.yaml

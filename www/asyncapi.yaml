asyncapi: 1.2.0

info:
  title: Let's Integrate Real Estate
  version: '0.0.1'
  description: |
    Reflex is intended to normalize the process of integrating applications and services
    in the real estate domain in a user-centric, vendor agnostic and developer friendly
    way.

    The API is very simple, the only interactions are publish a message (HTTP POST) and get messages either pushed to your 
    application or with HTTP GET.

    The project is 100% open source and contributors are welcomed with open arms.

    To get started you'll need to get yourself a POD that will provide your application's private message bus.

    If you don't already have a pod, contact us and we'll get you setup.

  contact:
    name: Dave Duran
    email: dave@yodata.io

  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

  x-info:
    route: /

  x-topics:
    name: Subscription Types
    hideProps: true
    hideExample: true
    intro: |
      ## Permission model

      The Events API leverages existing object-driven OAuth scope system to
      control access to events. For example, if your app has access to profiles
      through the `profiles:read` scope, you can choose to subscribe to any or
      none of the profile-related events like `profile_added` and
      `profile_updated`.

      You will only receive events from users who've authorized your app.

  x-messages:
    name: Event Types
    hideProps: true
    hideExample: false

  x-schemas:
    name: Object Types

baseTopic: realestate

topics:
  contact:
    x-summary: Contact / CRM events
    subscribe:
      oneOf:
        - $ref: '#/components/messages/contact#add'
        - $ref: '#/components/messages/contact#update'
        - $ref: '#/components/messages/contact#delete'
        - $ref: '#/components/messages/contact#comment'

  lead:
    x-summary: Lead events
    subscribe:
      oneOf:
        - $ref: '#/components/messages/lead#add'
        - $ref: '#/components/messages/lead#update'
        - $ref: '#/components/messages/lead#assign'
        - $ref: '#/components/messages/lead#accept'
        - $ref: '#/components/messages/lead#reject'

  marketing:
    x-summary: Marketing events
    subscribe:
      oneOf:
        - $ref: message/marketingprogram.create.yaml
        - $ref: message/marketingprogram.memberadd.yaml
        - $ref: message/marketingprogram.memberremove.yaml

  profile:
    x-summary: Affiliate, Office, and Agent profile events
    subscribe:
      oneOf:
        - $ref: '#/components/messages/profile#add'
        - $ref: '#/components/messages/profile#update'

  website:
    x-summary: Website events
    subscribe:
      oneOf:
        - $ref: '#/components/messages/website#appointmentrequest'
        - $ref: '#/components/messages/website#question'
        - $ref: '#/components/messages/website#showingrequest'

components:
  messages:
    $ref: message/index.yaml

  schemas:
    $ref: schemas/realestate.yaml

  securitySchemes:
    https:
      name: api-key
      type: httpApiKey
      in: header

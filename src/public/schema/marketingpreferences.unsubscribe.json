{
  "$id": "http://realestate.yodata.me/schema/marketingpreferences.unsubscribe.json",
  "messageId": "marketingpreferences#unsubscribe",
  "summary": "a consumer (agent) unsubscribes to email or sms for a specific agent (object)",
  "externalDocs": null,
  "headers": {
    "type": "object",
    "properties": {
      "time": {
        "type": "string",
        "format": "date-time",
        "description": "date & time the event was produced",
        "x-parser-schema-id": "<anonymous-schema-3>"
      },
      "agent": {
        "type": "string",
        "format": "uri",
        "description": "the user, team, or organization who sent the event",
        "example": "https://agentid.example.com/profile/card#me",
        "x-parser-schema-id": "<anonymous-schema-4>"
      },
      "instrument": {
        "type": "string",
        "format": "uri",
        "description": "the service which created the event",
        "example": "https://vendorid.example.com/profile/card#me",
        "x-parser-schema-id": "<anonymous-schema-5>"
      },
      "source": {
        "type": "string",
        "format": "uri",
        "description": "an agent, team or organization who received a copy of the event",
        "example": "https://companyid.example.com/profile/card#me",
        "x-parser-schema-id": "<anonymous-schema-6>"
      },
      "originalRecipient": {
        "type": "string",
        "format": "uri",
        "description": "the original recipient of the event with this id",
        "example": "https://agentid.example.com/profile/card#me",
        "x-parser-schema-id": "<anonymous-schema-7>"
      },
      "id": {
        "type": "string",
        "format": "uri",
        "description": "the shared identifier of the event, akd the event id",
        "example": "https://instrumentid.example.com/publish/xxxxxxxxxxxxx",
        "x-parser-schema-id": "<anonymous-schema-8>"
      },
      "@id": {
        "type": "string",
        "format": "uri",
        "description": "the url of your instance of the event in your inbox",
        "example": "https://yourpod.example.com/inbox/xxxxxxxxxxxxx",
        "x-parser-schema-id": "<anonymous-schema-9>"
      },
      "topic": {
        "type": "string",
        "description": "the event topic which determines the event.data schema",
        "x-parser-schema-id": "<anonymous-schema-2>",
        "enum": [
          "realestate/marketingpreferences#unsubscribe"
        ]
      }
    }
  },
  "payload": {
    "type": "object",
    "description": "the message payload",
    "allOf": [
      {
        "$id": "http://realestate.yodata.me/schema/Action",
        "title": "Action",
        "type": "object",
        "description": "An action performed by a direct agent and indirect participants upon a direct object. Optionally happens at a location with the help of an inanimate instrument. The execution of the action may produce a result. Specific action sub-type documentation specifies the exact expectation of each argument/role.",
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "description": "the action type",
            "type": "string",
            "x-parser-schema-id": "<anonymous-schema-113>"
          },
          "object": {
            "description": "item on which the action is carried out",
            "x-parser-schema-id": "<anonymous-schema-114>"
          }
        },
        "externalDocs": {
          "description": "schema.org/Action",
          "url": "https://schema.org/Action"
        },
        "x-parser-schema-id": "Action"
      },
      {
        "x-range": "UnsubscribeAction",
        "description": "the consumer (agent) has unsubscribed to content from the participant with roleName SubscriptionProvider.",
        "properties": {
          "type": {
            "enum": [
              "UnsubscribeAction"
            ]
          },
          "agent": {
            "type": "object",
            "description": "the subscriber",
            "x-range": "Contact",
            "example": {
              "type": "Contact",
              "email": "bob@example.com",
              "identifier": {
                "hsfconsumerid": "xxxxxxxxxxxxx"
              }
            }
          },
          "participant": {
            "description": "the subscription provider, an Agent, Team, Office or Organization",
            "x-range": [
              "RealEstateAgent",
              "RealEstateTeam",
              "RealEstateOffice",
              "RealEstateOrganization"
            ],
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "roleName": {
                  "type": "string",
                  "enum": [
                    "SubscriptionProvider"
                  ]
                },
                "id": {
                  "type": "string",
                  "format": "uri",
                  "example": "https://12345.example.com/profile/card#me"
                },
                "additionalProperty": {
                  "type": "object",
                  "properties": {
                    "isCompanyQueue": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        },
        "x-parser-schema-id": "<anonymous-schema-615>"
      }
    ],
    "x-parser-schema-id": "UnsubscribeAction"
  }
}
